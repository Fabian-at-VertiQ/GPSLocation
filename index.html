<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Capture GPS location</title>
        <link rel="manifest" href="GPS.webmanifest" />
        <script src="app.js" defer></script>
        <style>
            *{
                font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                font-size: 12pt;
            }
            html,body{
                margin: 0;
                padding: 0;
            }
            header{
                font-size: 20pt;
                text-align: center;
                color: white;
                background-color: rgb(0, 69, 230);
                margin: 0 0 10px 0;
                padding: 3px 0 5px 0;
            }
            label{
                display:block;
                margin-top:20px;
            }

            .container{
                padding-left: 20px;
            }

            #ClearAllWarning{
                border:0;
                border-top: solid rgb(245, 111, 111) 25px ;
                background-color: hsl(225, 44%, 96%);
            }

            #ClearAllWarning input{
                margin: 20px 10px 5px 10px;
            }

            ::backdrop {
                background-color: rgb(107, 93, 102);
                opacity: 0.60;
                }

            .GPSPin {
                background-image: url(GPSPin.jpg);
                background-repeat: no-repeat;
                background-position: 0 3px;
                background-color: transparent;
                padding: 4px 0 8px 25px;
                border: 1px solid lightgray;
                height: 30px;
                width: 170px;
                text-align:left;
                margin-top:20px;
                display:inline;
            }
            .loc{
                font-family: monospace;
                font-size: 14pt;
                margin: 2px 0 20px 25px;
                height: 16pt;
                white-space: pre;
            }
            hr{
                margin: 40px 0 20px -20px;
            }
            .delete{
                background: transparent;
                border: none;
            }

            #Wait {
                border: transparent !important;
                background-color: transparent;
            }
            #Wait::backdrop {
                background-color: hsla(0, 0%, 69%, 0.6); ;
            }

            .rotating-dish {
                animation: rotate 1s linear infinite alternate; /* Animation definition */
                transform-origin: 25px 36px;
            }
            
            @keyframes rotate {
                from { transform: rotate(-30deg); }
                to { transform: rotate(-15deg); }
            }
            #WaitingGPSSignal{
                width:100vw;
                height: 100vh;
                background-color: transparent;
            }
            #satellite{
                stroke-width:.8;
                fill: white;
                stroke: blue;
            }
            .signal1{
                transform: rotate(-15deg);
                transform-origin: 25px 36px;
            }


        </style>
    </head>
    <body>
        <header>Capture GPS location</header>
        <div class="container">
            <p>Welcome back <span id="DisplayUserId"></span></p>
            
            <label for="CaseNum">CaseNum *</label>
            <input id="CaseNum" type="text" />
            <br/>
            <label for="Decedent">Decedent's name</label>
            <input id="Decedent" type="text" />
            <br/>
            <label for="Incident">Get GPS coordinates for:</label>
            <button id="Incident" type="button"  class="GPSPin">Incident location</button>
            <button id="DeleteIncident" type="button" data-button="incident" class="delete"><img src="delete.png" alt="Delete incident location" data-button="incident"/></button>
            <p id="LocationIncident" class="loc" data-button="incident"></p>
            <button id="Home" type="button" class="GPSPin">Decedent's home</button>
            <button id="DeleteHome" type="button" data-button="home" class="delete"><img src="delete.png" alt="Delete incident location" data-button="home" /></button>
            <p id="LocationHome" class="loc" data-button="home"></p>
            <button id="Death" type="button" class="GPSPin">Death location </button>
            <button id="DeleteDeath" type="button" data-button="death" class="delete"><img src="delete.png" alt="Delete incident location" data-button="death"/></button>
            <p id="LocationDeath" class="loc" data-button="death"></p>
            <hr />
            
            <input id="ClearAll" type="button" value="Clear all stored data" />
            <br />
            <br />
            <input id="SendStoredData" type="button" value="Send stored data"  />

            <p id="StoredData"></p>
            <br/><br/><br/><br/>
            <p>Version: 5</p>
        </div>
        <dialog id="UserWelcome">
            <h2>Welcome</h2>
            <label for="UserId">Please enter your name to continue, this will help to identify the captured locations when syncing them back into the application. *</label>
            <input id="UserId" type="text" required />
            <input id="CloseWelcome" type="button" value="Close" />
        </dialog>

        <dialog id="WarningNoCase">
            <h2>Please enter a CaseNum to be use as a reference before capturing a location!</h2>
            <button id="HideWarningNoCase" type="button">Close</button>
        </dialog>
        <dialog id="ClearAllWarning">
            <label for="ResetStorage">You are about to delete all stored locations on this device<br/>This action cannot be undone</label>
            <button id="HideWarning" type="button">Cancel</button>
            <button id="ResetStorage" type="button">Clear All</button>
        </dialog>    
        
        <dialog id="NoLocalStorage">
            <h2>You cannot use this app on your device.</h2>
                <label>Your device/browser current configuration does not allow to store data while off-line.</label>
        </dialog>
        <dialog id="Wait">
            <svg id="WaitingGPSSignal" viewBox="-50 -100 200 200" preserveAspectRatio="xMinYMin" xmlns="http://www.w3.org/2000/svg">
                <g id="satellite">
                    <g id="base">
                        <path
                            d ="M15,40
                                l-10,30
                                l15,0
                                l-2,-30
                                z">
                        </path>
                        <rect 
                            x="2"
                            y="70"
                            width="21"
                            height="2">
                        </rect>
                    </g>
                    <g class="rotating-dish" >
                        <path d="M32,30
                                l8 6 -8 6" />
                        <circle cx="40" cy="36" r="2" />
                        <path 
                            d = "M32,12
                                a20,25 0 1,0 0,50
                                M32,12 l0,50" />
                    </g>                  
                    <g class="rotating-dish">
                        <path id="signal1" class="signal"
                            d = "M44 34
                                a4,4 0 0,1 0,4
                                M48 32
                                a8,8 0 0,1 0,8">
                            <animate attributeName="opacity"
                                from="1" to="0" dur=".5s" repeatCount="indefinite" />
                        </path>
        
                        <path id="signal2" class="signal"
                            d = "M46 33
                                a6,6 0 0,1 0,6
                                M50 30
                                a11,11 0 0,1 0,11" >
                            <animate attributeName="opacity"
                                from="0" to="1" dur=".5s" delay=".5s" repeatCount="indefinite" />
                        </path>
                    </g>
                </g>
            </svg>
        </dialog>
    </body>
   
</html>
